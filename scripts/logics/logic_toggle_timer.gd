@tool
extends Timer
class_name LogicToggleTimer


# ------------------------------------------------------------------------------
# Signals
# ------------------------------------------------------------------------------
signal trigger_state_changed(triggered : bool)

# ------------------------------------------------------------------------------
# Export Variables
# ------------------------------------------------------------------------------
@export var start_triggered : bool = false

# ------------------------------------------------------------------------------
# Variables
# ------------------------------------------------------------------------------
var _triggered : bool = false:		set=_set_triggered

# ------------------------------------------------------------------------------
# Setters
# ------------------------------------------------------------------------------
func _set_triggered(t : bool) -> void:
	if t != _triggered:
		_triggered = t
		trigger_state_changed.emit(_triggered)

# ------------------------------------------------------------------------------
# Override Methods
# ------------------------------------------------------------------------------
func _ready() -> void:
	_triggered = start_triggered
	timeout.connect(_on_timeout)

# ------------------------------------------------------------------------------
# Public Methods
# ------------------------------------------------------------------------------
func is_triggered() -> bool:
	return _triggered

# ------------------------------------------------------------------------------
# Handler Methods
# ------------------------------------------------------------------------------
func _on_timeout() -> void:
	_triggered = not _triggered
